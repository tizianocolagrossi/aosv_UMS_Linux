\hypertarget{proc_8h_source}{}\doxysection{proc.\+h}
\mbox{\hyperlink{proc_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/* }}
\DoxyCodeLine{2 \textcolor{comment}{ * This file is part of the User Mode Thread Scheduling (Kernel Module).}}
\DoxyCodeLine{3 \textcolor{comment}{ * Copyright (c) 2021 Tiziano Colagrossi.}}
\DoxyCodeLine{4 \textcolor{comment}{ * }}
\DoxyCodeLine{5 \textcolor{comment}{ * This program is free software: you can redistribute it and/or modify  }}
\DoxyCodeLine{6 \textcolor{comment}{ * it under the terms of the GNU General Public License as published by  }}
\DoxyCodeLine{7 \textcolor{comment}{ * the Free Software Foundation, version 3.}}
\DoxyCodeLine{8 \textcolor{comment}{ *}}
\DoxyCodeLine{9 \textcolor{comment}{ * This program is distributed in the hope that it will be useful, but }}
\DoxyCodeLine{10 \textcolor{comment}{ * WITHOUT ANY WARRANTY; without even the implied warranty of }}
\DoxyCodeLine{11 \textcolor{comment}{ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU }}
\DoxyCodeLine{12 \textcolor{comment}{ * General Public License for more details.}}
\DoxyCodeLine{13 \textcolor{comment}{ *}}
\DoxyCodeLine{14 \textcolor{comment}{ * You should have received a copy of the GNU General Public License }}
\DoxyCodeLine{15 \textcolor{comment}{ * along with this program. If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{16 \textcolor{comment}{ */}}
\DoxyCodeLine{17 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#ifndef \_\_PROC\_H}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#define \_\_PROC\_H}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{utility_8h}{utility.h}}"{}}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{ums_8h}{ums.h}}"{}}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include <linux/kernel.h>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#include <linux/module.h>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include <linux/slab.h>}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#include <linux/proc\_fs.h>}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#include <linux/seq\_file.h>}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include <linux/hashtable.h>}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define MODULE\_PROC\_LOG "{}UMS\_PROC: "{}}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define UMS\_PROC\_DEBUG}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{preprocessor}{\#define HASH\_KEY\_SIZE 10}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#define NAME\_BUFF     30}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{preprocessor}{\#define PROC\_DIR      "{}ums"{}}}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#define SCHED\_DIR     "{}schedulers"{}}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#define WKT\_DIR       "{}workers"{}}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#define UMS\_INFO      "{}ums\_info"{}}}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#define WKT\_INFO      "{}wkt\_info"{}}}
\DoxyCodeLine{51 }
\DoxyCodeLine{52 \textcolor{preprocessor}{\#define UMS\_ALL\_DIR   "{}.all\_ums"{}}}
\DoxyCodeLine{53 \textcolor{preprocessor}{\#define WKT\_ALL\_DIR   "{}.all\_wkt"{}}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#define  CQ\_ALL\_DIR   "{}.all\_cq"{}}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 }
\DoxyCodeLine{62 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structowner__proc}{owner\_proc}}\{}
\DoxyCodeLine{63     \textcolor{keyword}{struct }proc\_dir\_entry *   \mbox{\hyperlink{structowner__proc_a4960f360ef0e92198a79e2a1c00f4a80}{dir\_entry}}; }
\DoxyCodeLine{64     \textcolor{keyword}{struct }proc\_dir\_entry * \mbox{\hyperlink{structowner__proc_a1e5c9902c28873b0f9a3b51d494ad0ed}{sched\_entry}}; }
\DoxyCodeLine{65     \textcolor{keywordtype}{unsigned}                        \mbox{\hyperlink{structowner__proc_a5b9eb4173bf7647201492af1e0ec55b7}{pid}}; }
\DoxyCodeLine{66     \textcolor{keywordtype}{char}            \mbox{\hyperlink{structowner__proc_a9fe0531702d5670df9a1a480709d2705}{name\_dir}}[NAME\_BUFF]; }
\DoxyCodeLine{67     \textcolor{keyword}{struct }hlist\_node             \mbox{\hyperlink{structowner__proc_a1df814fbc18a988b046ae9af18243598}{hlist}}; }
\DoxyCodeLine{68 \}\mbox{\hyperlink{proc_8h_abdd93b90513666aaadd628f70e40c1fc}{owner\_proc\_t}};}
\DoxyCodeLine{69 }
\DoxyCodeLine{74 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structworker__proc}{worker\_proc}}\{}
\DoxyCodeLine{75     \textcolor{keyword}{struct }proc\_dir\_entry *   \mbox{\hyperlink{structworker__proc_a78eac572d664d2616714f40a9f2a49a2}{dir\_entry}}; }
\DoxyCodeLine{76     \textcolor{keyword}{struct }proc\_dir\_entry *  \mbox{\hyperlink{structworker__proc_a3146fb45a67a281926fe319a09d98f56}{info\_entry}}; }
\DoxyCodeLine{77     \textcolor{keyword}{struct }proc\_dir\_entry *     \mbox{\hyperlink{structworker__proc_aa8a9104d3544ada8e8648dd4dd9dfa2c}{link\_to}}; }
\DoxyCodeLine{78     \textcolor{keywordtype}{unsigned}                        \mbox{\hyperlink{structworker__proc_a6b7da361a25db39df030b97c6c28fa9e}{pid}}; }
\DoxyCodeLine{79     \textcolor{keywordtype}{char}            \mbox{\hyperlink{structworker__proc_a9dfc37c67c25396083f9295007cc6270}{name\_dir}}[NAME\_BUFF]; }
\DoxyCodeLine{80     \textcolor{keywordtype}{char}                \mbox{\hyperlink{structworker__proc_a06d0e4f86f4f933e4fc0881edbcfbc6d}{path}}[NAME\_BUFF]; }
\DoxyCodeLine{81     \textcolor{keyword}{struct }hlist\_node             \mbox{\hyperlink{structworker__proc_a9c2bd84e1ad6cc56c6e03d423fced9a7}{hlist}}; }
\DoxyCodeLine{82 \}\mbox{\hyperlink{proc_8h_a53f6e28ecf60f58db22de49e454a44e7}{worker\_proc\_t}};}
\DoxyCodeLine{83 }
\DoxyCodeLine{89 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structums__proc}{ums\_proc}}\{}
\DoxyCodeLine{90     \textcolor{keyword}{struct }proc\_dir\_entry *   \mbox{\hyperlink{structums__proc_a8dc0796567adff1b16d3267c31019a5c}{dir\_entry}}; }
\DoxyCodeLine{91     \textcolor{keyword}{struct }proc\_dir\_entry *  \mbox{\hyperlink{structums__proc_aba73e4c4cc7feb46573ea3d33ca7aa5f}{info\_entry}}; }
\DoxyCodeLine{92     \textcolor{keyword}{struct }proc\_dir\_entry *     \mbox{\hyperlink{structums__proc_ae7a8faf123200d6642c6c25a7d8a882d}{link\_to}}; }
\DoxyCodeLine{93     \textcolor{keywordtype}{unsigned}                  \mbox{\hyperlink{structums__proc_a9d3230434638660efb808ea1405a489b}{pid\_owner}}; }
\DoxyCodeLine{94     \textcolor{keywordtype}{unsigned}                        \mbox{\hyperlink{structums__proc_a2a0e56909660a43695359dd0004ed8f1}{pid}}; }
\DoxyCodeLine{95     \textcolor{keywordtype}{int}                           \mbox{\hyperlink{structums__proc_ad991a50dc80725e09f19fe88413230fe}{cq\_id}}; }
\DoxyCodeLine{96     \textcolor{keywordtype}{char}            \mbox{\hyperlink{structums__proc_ad888b6985df6fe4b80d6c61ed7ee229d}{name\_dir}}[NAME\_BUFF]; }
\DoxyCodeLine{97     \textcolor{keywordtype}{char}                \mbox{\hyperlink{structums__proc_a4ce37ef723445090f23e25b4d67ce023}{path}}[NAME\_BUFF]; }
\DoxyCodeLine{98     \textcolor{keyword}{struct }hlist\_node             \mbox{\hyperlink{structums__proc_ab645f3d7e2003ddbaf60f09fe9c4689e}{hlist}}; }
\DoxyCodeLine{99 \}\mbox{\hyperlink{proc_8h_acd7369c11b87beb9747a2e4fb013c01b}{ums\_proc\_t}};}
\DoxyCodeLine{100 }
\DoxyCodeLine{105 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structcq__proc}{cq\_proc}}\{}
\DoxyCodeLine{106     \textcolor{keyword}{struct }proc\_dir\_entry *   \mbox{\hyperlink{structcq__proc_a2106060c035508108f9c82341b10bc64}{dir\_entry}}; }
\DoxyCodeLine{107     \textcolor{keyword}{struct }proc\_dir\_entry *     \mbox{\hyperlink{structcq__proc_a76915cd85e0278f3af3e93bb67780c01}{link\_to}}; }
\DoxyCodeLine{108     \textcolor{keywordtype}{int}                           \mbox{\hyperlink{structcq__proc_a4a9460cc44e9a8f90a5ae15d5a4ce582}{cq\_id}}; }
\DoxyCodeLine{109     \textcolor{keywordtype}{char}            \mbox{\hyperlink{structcq__proc_a751764145d1dc1b578d441c3cbde820e}{name\_dir}}[NAME\_BUFF]; }
\DoxyCodeLine{110     \textcolor{keywordtype}{char}                \mbox{\hyperlink{structcq__proc_a2533dcb8bbabe3c836cf43ce8ae4fdeb}{path}}[NAME\_BUFF]; }
\DoxyCodeLine{111     \textcolor{keyword}{struct }hlist\_node             \mbox{\hyperlink{structcq__proc_a688043204c9f8a7927caecb8ea630819}{hlist}}; }
\DoxyCodeLine{112 \}\mbox{\hyperlink{proc_8h_a68ac9312affc1a497851eced2d411fda}{cq\_proc\_t}};}
\DoxyCodeLine{113 }
\DoxyCodeLine{114 \textcolor{comment}{/*}}
\DoxyCodeLine{115 \textcolor{comment}{* Function exported for create file and directory inside the procfs }}
\DoxyCodeLine{116 \textcolor{comment}{*/}}
\DoxyCodeLine{117 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a2cce105f1878949f055ac8fbb49450ad}{Proc\_Update\_Worker\_Created}}  (\textcolor{keywordtype}{int} pid    );}
\DoxyCodeLine{118 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a9a86c1a056ba322a329c93bf8143756c}{Proc\_Update\_Worker\_Ended}}    (\textcolor{keywordtype}{int} wkt\_pid);}
\DoxyCodeLine{119 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a4356ac452c746426b4d93a15c42642bd}{Proc\_Update\_Worker\_Appended}} (\textcolor{keywordtype}{int} wkt\_pid , \textcolor{keywordtype}{int} \textcolor{keywordtype}{id}      );}
\DoxyCodeLine{120 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a76c832658b824fdd3f3e7444eed36998}{Proc\_Update\_Ums\_Created}}     (\textcolor{keywordtype}{int} pid     , \textcolor{keywordtype}{int} pid\_owner, \textcolor{keywordtype}{int} \textcolor{keywordtype}{id});}
\DoxyCodeLine{121 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_ae521fa6c4855e5a5f57c00d51f2e1df0}{Proc\_Update\_Ums\_Ended}}       (\textcolor{keywordtype}{int} ums\_pid);}
\DoxyCodeLine{122 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_acd51dc9de3d740215e798d1bbb4588a6}{Proc\_Update\_Cq\_Created}}      (\textcolor{keywordtype}{int} \textcolor{keywordtype}{id}     );}
\DoxyCodeLine{123 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_aaf3fc9dd67e138eebe225f72d335eb19}{Proc\_Update\_Cq\_Deleted}}      (\textcolor{keywordtype}{int} \textcolor{keywordtype}{id}     );}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 \textcolor{comment}{/*}}
\DoxyCodeLine{126 \textcolor{comment}{* Function used to initialize this part of the UMS kernel module}}
\DoxyCodeLine{127 \textcolor{comment}{*/}}
\DoxyCodeLine{128 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a0066639f9bfabe52b228b58f38ab5e09}{try\_build\_ums\_proc}} (\textcolor{keywordtype}{void});}
\DoxyCodeLine{129 \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a52e2e82400df1a7bdf070872d6aeb418}{clear\_ums\_proc}}     (\textcolor{keywordtype}{void});}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
